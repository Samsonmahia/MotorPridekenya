<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MotorPride Kenya Cars | Browse Our Available Units</title>
<meta name="description" content="Explore a wide range of new and used cars available at MotorPride Kenya. View prices, specs, and reserve via WhatsApp.">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a73e8;
            --primary-dark: #0d5bb9;
            --secondary-color: #f8f9fa;
            --accent-color: #ff6b35;
            --text-color: #333;
            --light-text: #666;
            --border-color: #e0e0e0;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 25px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: var(--transition);
        }

        nav ul li a:hover {
            color: var(--primary-color);
        }

        nav ul li a.active {
            color: var(--primary-color);
            font-weight: 600;
        }

        .page-title {
            font-size: 32px;
            margin: 30px 0;
            text-align: center;
        }

        /* Search Results Header */
        .search-results-header {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: none;
        }

        .search-results-title {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .search-criteria {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }

        .search-criteria-item {
            background-color: var(--secondary-color);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .clear-search {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
        }

        .clear-search:hover {
            background-color: #e55a2b;
        }

        /* Cars Grid - Improved Design */
        .cars-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .car-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .car-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }

        .car-image-container {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .car-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .car-card:hover .car-image {
            transform: scale(1.08);
        }

        .reserve-btn {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            z-index: 10;
        }

        .reserve-btn:hover {
            background-color: #e55a2b;
            transform: scale(1.05);
        }

        .car-info {
            padding: 18px;
        }

        .car-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .car-id {
            font-size: 12px;
            color: var(--light-text);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .car-year-price {
            display: flex;
            justify-content: space-between;
            color: var(--light-text);
            margin-bottom: 12px;
        }

        .car-price {
            font-weight: 600;
            color: var(--accent-color);
            font-size: 18px;
        }

        .car-specs {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: var(--light-text);
        }

        /* Enhanced Status Badges with Scroll Animation */
        .status-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 5;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s ease;
        }

        .status-badge.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .status-available {
            background-color: #28a745;
            color: white;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
        }

        .status-incoming {
            background-color: #ffc107;
            color: #000;
            box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
        }

        .status-sold {
            background-color: #6c757d;
            color: white;
            box-shadow: 0 2px 8px rgba(108, 117, 125, 0.3);
        }

        /* Modal Styles with Enhanced Animations */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .car-detail-modal {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 1100px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            transform: scale(0.8);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-overlay.active .car-detail-modal {
            transform: scale(1);
            opacity: 1;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--light-text);
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: var(--text-color);
            background-color: rgba(0, 0, 0, 0.05);
        }

        .modal-content {
            padding: 25px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .car-images {
            display: flex;
            flex-direction: column;
        }

        .primary-image {
            width: 100%;
            height: 350px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
            box-shadow: var(--shadow);
        }

        .primary-image:hover {
            transform: scale(1.02);
        }

        /* Enlarged Thumbnails */
        .thumbnails {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .thumbnail {
            width: 100%;
            height: 100px;
            object-fit: cover;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .thumbnail:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .thumbnail.active {
            border: 3px solid var(--primary-color);
            transform: scale(1.05);
        }

        .car-details {
            display: flex;
            flex-direction: column;
        }

        .detail-item {
            margin-bottom: 18px;
            padding-bottom: 18px;
            border-bottom: 1px solid var(--border-color);
            animation: slideInRight 0.5s ease forwards;
            opacity: 0;
            transform: translateX(20px);
        }

        @keyframes slideInRight {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .detail-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
            font-size: 16px;
        }

        .features-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            background-color: rgba(26, 115, 232, 0.05);
            border-radius: 6px;
            transition: var(--transition);
        }

        .feature-item:hover {
            background-color: rgba(26, 115, 232, 0.1);
            transform: translateX(5px);
        }

        .feature-item::before {
            content: "âœ“";
            color: var(--accent-color);
            font-weight: bold;
        }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .nav-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .modal-reserve-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(255, 107, 53, 0.3);
        }

        .modal-reserve-btn:hover {
            background-color: #e55a2b;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255, 107, 53, 0.4);
        }

        /* Enhanced Agents Modal */
        .agents-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            width: 90%;
            max-width: 700px;
            box-shadow: var(--shadow-lg);
            z-index: 1100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .agents-modal.active {
            opacity: 1;
            visibility: visible;
            animation: modalSlideIn 0.4s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        .agents-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .agents-title {
            font-size: 22px;
            font-weight: 600;
        }

        .close-agents {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--light-text);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-agents:hover {
            color: var(--text-color);
            background-color: rgba(0, 0, 0, 0.05);
        }

        .agents-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .agent-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            background-color: var(--secondary-color);
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .agent-item:hover {
            background-color: #e9ecef;
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .agent-photo {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
            font-size: 36px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .agent-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 18px;
        }

        .agent-role {
            font-size: 14px;
            color: var(--light-text);
            margin-bottom: 15px;
        }

        .agent-action {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            width: 100%;
            font-weight: 600;
        }

        .agent-action:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin: 40px 0;
        }

        .pagination button {
            background-color: white;
            border: 1px solid var(--border-color);
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
            border-radius: 6px;
            transition: var(--transition);
            font-weight: 600;
        }

        .pagination button:hover:not(:disabled) {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-numbers {
            display: flex;
            align-items: center;
            margin: 0 10px;
            font-weight: 600;
        }

        /* Caplicity Motors branding */
        .caplicity-brand {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 700;
            color: #1a73e8;
            font-size: 14px;
            margin-bottom: 5px;
            letter-spacing: 0.5px;
        }

        @media (max-width: 992px) {
            .modal-content {
                grid-template-columns: 1fr;
            }
            
            .thumbnails {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                margin-top: 10px;
            }
            
            .cars-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .features-list {
                grid-template-columns: 1fr;
            }
            
            .thumbnails {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .agents-list {
                grid-template-columns: 1fr;
            }
            
            .search-criteria {
                flex-direction: column;
                gap: 10px;
            }
        }

        @media (max-width: 576px) {
            .cars-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-footer {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-buttons {
                justify-content: center;
            }
            
            .thumbnails {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">MotorPride Kenya</div>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#" class="active">All Cars</a></li>
                        <li><a href="aboutus.html">About</a></li>
                        <li><a href="contacts.html">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <h1 class="page-title" id="pageTitle">Our Vehicle Collection</h1>
        
        <!-- Search Results Header -->
        <div class="search-results-header" id="searchResultsHeader">
            <h2 class="search-results-title" id="searchResultsTitle">Search Results</h2>
            <div class="search-criteria" id="searchCriteria"></div>
            <button class="clear-search" id="clearSearch">Clear Search & Show All Vehicles</button>
        </div>
        
        <div class="cars-grid" id="carsGrid">
            <!-- Cars will be loaded here by JavaScript -->
        </div>
        
        <div class="pagination">
            <button id="prevPage" disabled>Previous</button>
            <div class="page-numbers">
                <span id="currentPage">1</span> / <span id="totalPages">1</span>
            </div>
            <button id="nextPage">Next</button>
        </div>
    </main>

    <!-- Car Details Modal -->
    <div class="modal-overlay" id="carModal">
        <div class="car-detail-modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalCarTitle">Car Details</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-content">
                <div class="car-images">
                    <img src="" alt="Car Image" class="primary-image" id="modalPrimaryImage">
                    <div class="thumbnails" id="modalThumbnails"></div>
                </div>
                <div class="car-details" id="carDetails"></div>
            </div>
            <div class="modal-footer">
                <div class="nav-buttons">
                    <button class="nav-btn" id="prevCar">Previous Car</button>
                    <button class="nav-btn" id="nextCar">Next Car</button>
                </div>
                <button class="modal-reserve-btn" id="modalReserveBtn">Reserve This Car</button>
            </div>
        </div>
    </div>

    <!-- Agents Modal -->
    <div class="agents-modal" id="agentsModal">
        <div class="agents-header">
            <h3 class="agents-title">Contact Our Sales Team</h3>
            <button class="close-agents" id="closeAgents">&times;</button>
        </div>
        <div class="agents-message">
            <p>For reservations and enquiries about this vehicle, please contact one of our sales agents:</p>
        </div>
        <div class="agents-list" id="agentsList"></div>
        <div class="agents-footer">
            <button class="exit-reserve" id="exitReserve">Exit Reservation</button>
        </div>
    </div>

    <script>
        // Sample car data (replace with your actual data)
        const cars = [
            {
  "id": "MPK0001A",
  "name": "Toyota Harrier 2018 GR Sport Package",
  "make": "Toyota",
  "model": "Harrier",
  "year": 2018,
  "price": "4,000,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "mileage": "â€”",
  "status": "Available",
  "images": [
    "https://i.ibb.co/M5JJDywy/Whats-App-Image-2025-11-12-at-8-36-36-AM-1.jpg",
    "https://i.ibb.co/Qj9yfSy9/Whats-App-Image-2025-11-12-at-8-36-36-AM.jpg",
    "https://i.ibb.co/4w3TQ9xb/Whats-App-Image-2025-11-12-at-8-36-37-AM-1.jpg",
    "https://i.ibb.co/29M5Q4J/Whats-App-Image-2025-11-12-at-8-36-37-AM-2.jpg",
    "https://i.ibb.co/GvPmVMWb/Whats-App-Image-2025-11-12-at-8-36-37-AM.jpg",
    "https://i.ibb.co/V08pxSLC/Whats-App-Image-2025-11-12-at-8-36-38-AM-1.jpg",
    "https://i.ibb.co/WNDyJchH/Whats-App-Image-2025-11-12-at-8-36-38-AM.jpg",
    "https://i.ibb.co/nMYCShMY/Whats-App-Image-2025-11-12-at-8-36-39-AM-1.jpg",
    "https://i.ibb.co/60qW3Xzw/Whats-App-Image-2025-11-12-at-8-36-39-AM.jpg",
    "https://i.ibb.co/Bmzc8x4/Whats-App-Image-2025-11-12-at-8-36-40-AM-1.jpg",
    "https://i.ibb.co/Kx0cpm67/Whats-App-Image-2025-11-12-at-8-36-40-AM.jpg",
    "https://i.ibb.co/Cs0Cqnyg/Whats-App-Image-2025-11-12-at-8-36-41-AM-1.jpg",
    "https://i.ibb.co/ycKMq0nR/Whats-App-Image-2025-11-12-at-8-36-41-AM.jpg"
  ],
  "features": [
    "2000cc Petrol Engine",
    "GR Sport Package",
    "Black Exterior",
    "Half Leather with Alcantara Bucket Seats",
    "Electrically Adjustable Driverâ€™s Seat",
    "Electric Handbrake with Auto Hold",
    "Auto Start/Stop System",
    "Anti-Collision Assist",
    "Panoramic Sunroof",
    "Alloy Rims",
    "Daytime Running Lights",
    "Fog Lights",
    "Multifunctional Steering Wheel Controls",
    "Cruise Control",
    "Lane Departure Warning"
  ]
},

{
  "id": "MPK0002A",
  "name": "Mazda CX-5 2019 XD L",
  "make": "Mazda",
  "model": "CX-5",
  "year": 2019,
  "price": "3,100,000",
  "transmission": "Automatic",
  "fuel": "Diesel",
  "mileage": "71,000 km",
  "status": "Available",
  "images": [
    "https://i.ibb.co/d0YcGRNZ/Whats-App-Image-2025-12-08-at-8-10-49-PM.jpg",
    "https://i.ibb.co/DDYtGpR7/Whats-App-Image-2025-12-08-at-8-10-48-PM.jpg",
    "https://i.ibb.co/R4jMCRvW/Whats-App-Image-2025-12-08-at-8-10-47-PM.jpg",
    "https://i.ibb.co/RT5DW1Zq/Whats-App-Image-2025-12-08-at-8-10-46-PM-1.jpg",
    "https://i.ibb.co/mFSRNpDD/Whats-App-Image-2025-12-08-at-8-10-44-PM-2.jpg",
    "https://i.ibb.co/GQPtxbbK/Whats-App-Image-2025-12-08-at-8-10-44-PM-1.jpg",
    "https://i.ibb.co/nsSrV13r/Whats-App-Image-2025-12-08-at-8-10-44-PM.jpg",
    "https://i.ibb.co/b5cmv8XN/Whats-App-Image-2025-12-08-at-8-10-43-PM.jpg",
    "https://i.ibb.co/HLZXFPNC/Whats-App-Image-2025-12-08-at-8-10-46-PM.jpg",
    "https://i.ibb.co/ZzVsZ4Xk/Whats-App-Image-2025-12-08-at-8-10-47-PM-2.jpg"
  ],
  "features": [
    "2200cc Diesel Engine",
    "Gray Exterior",
    "Dark Leather Upholstery",
    "Front and Rear Heated Seats",
    "Heated Steering",
    "Powered Tailgate",
    "Electrically Adjustable Front Seats with Driver's Memory",
    "Round Parking Sensors",
    "i-Stop Technology",
    "Lane Departure Warning",
    "Blindspot Monitoring",
    "Multifunctional Steering Wheel Controls",
    "FM/DVD Touchscreen Player",
    "19\" Original Mazda Alloy Rims",
    "Daytime Running Lights",
    "Fog Lights",
    "Low Mileage at 71,000 km"
  ]
},

{
  "id": "MPK0003A",
  "name": "BMW 218i 2018",
  "make": "BMW",
  "model": "218i",
  "year": 2018,
  "price": "2,300,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "mileage": "46,204 km",
  "status": "Available",
  "images": [
    "https://i.ibb.co/wFDWsjXZ/Whats-App-Image-2025-12-08-at-8-21-42-PM-1.jpg",
    "https://i.ibb.co/chcLgDzF/Whats-App-Image-2025-12-08-at-8-21-42-PM.jpg",
    "https://i.ibb.co/zVsLq0HK/Whats-App-Image-2025-12-08-at-8-21-43-PM-1.jpg",
    "https://i.ibb.co/yFgNXC9T/Whats-App-Image-2025-12-08-at-8-21-43-PM-2.jpg",
    "https://i.ibb.co/pvwshStb/Whats-App-Image-2025-12-08-at-8-21-43-PM-3.jpg",
    "https://i.ibb.co/gMjyy86B/Whats-App-Image-2025-12-08-at-8-21-43-PM.jpg",
    "https://i.ibb.co/vvD5v06T/Whats-App-Image-2025-12-08-at-8-21-44-PM-1.jpg",
    "https://i.ibb.co/LXp9F3xx/Whats-App-Image-2025-12-08-at-8-21-44-PM-2.jpg",
    "https://i.ibb.co/4n9KMbm7/Whats-App-Image-2025-12-08-at-8-21-44-PM-3.jpg",
    "https://i.ibb.co/994MCkn8/Whats-App-Image-2025-12-08-at-8-21-44-PM.jpg",
    "https://i.ibb.co/Sw0SP4Zr/Whats-App-Image-2025-12-08-at-8-21-45-PM-1.jpg",
    "https://i.ibb.co/LDS15n2p/Whats-App-Image-2025-12-08-at-8-21-45-PM-2.jpg",
    "https://i.ibb.co/mFVS21Lz/Whats-App-Image-2025-12-08-at-8-21-45-PM.jpg"
  ],
  "features": [
    "Blue Exterior",
    "1500cc Turbo Petrol Engine",
    "Heated Seats",
    "Powered Tailgate",
    "Fabric Upholstery",
    "Multifunctional Steering Wheel Controls",
    "Cruise Control",
    "Push to Start",
    "Keyless Entry",
    "Reverse Camera",
    "Daytime Running Lights",
    "Fog Lights",
    "Alloy Rims",
    "Bluetooth/USB Infotainment System",
    "Very Clean and Well Maintained",
    "Low Mileage: 46,204 km"
  ]
},

{
  "id": "MPK0004A",
  "name": "BMW X5 XDrive 35D X Line 2017",
  "make": "BMW",
  "model": "X5",
  "year": 2017,
  "price": "6,050,000",
  "transmission": "Automatic",
  "fuel": "Diesel",
  "mileage": "44,000 km",
  "status": "Available",
  "images": [
    "https://i.ibb.co/gLxmjgJ1/Whats-App-Image-2025-12-08-at-8-28-21-PM-1.jpg",
    "https://i.ibb.co/jPZJqcLP/Whats-App-Image-2025-12-08-at-8-28-21-PM-2.jpg",
    "https://i.ibb.co/bjdWyVx5/Whats-App-Image-2025-12-08-at-8-28-21-PM.jpg",
    "https://i.ibb.co/cKbzGLfw/Whats-App-Image-2025-12-08-at-8-28-22-PM-1.jpg",
    "https://i.ibb.co/wZh4mMwd/Whats-App-Image-2025-12-08-at-8-28-22-PM-2.jpg",
    "https://i.ibb.co/JRTjZ0h6/Whats-App-Image-2025-12-08-at-8-28-22-PM.jpg",
    "https://i.ibb.co/mVJ1MVNM/Whats-App-Image-2025-12-08-at-8-28-23-PM-1.jpg",
    "https://i.ibb.co/Ngy4sd5M/Whats-App-Image-2025-12-08-at-8-28-23-PM-2.jpg",
    "https://i.ibb.co/k6hHLtVr/Whats-App-Image-2025-12-08-at-8-28-23-PM.jpg"
  ],
  "features": [
    "Panoramic Sunroof",
    "3000cc Diesel Engine",
    "7 Seater",
    "Low Mileage: 44,000 km",
    "Unregistered",
    "Automatic Transmission",
    "X Line Package"
  ]
},

{
  "id": "MPK0005A",
  "name": "Nissan X-Trail NT31 2012",
  "make": "Nissan",
  "model": "X-Trail NT31",
  "year": 2012,
  "price": "1,350,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "mileage": "159,000 km",
  "status": "Available",
  "images": [
    "https://i.ibb.co/XkpHhQPH/Whats-App-Image-2025-12-08-at-8-36-05-PM.jpg",
    "https://i.ibb.co/WWCTXbjn/Whats-App-Image-2025-12-08-at-8-36-06-PM-1.jpg",
    "https://i.ibb.co/yFzTbs4H/Whats-App-Image-2025-12-08-at-8-36-06-PM-2.jpg",
    "https://i.ibb.co/GvL63PCW/Whats-App-Image-2025-12-08-at-8-36-06-PM.jpg",
    "https://i.ibb.co/Vp2xPyjZ/Whats-App-Image-2025-12-08-at-8-36-07-PM-1.jpg",
    "https://i.ibb.co/bg4BNcNh/Whats-App-Image-2025-12-08-at-8-36-07-PM-2.jpg",
    "https://i.ibb.co/YBmR0xbF/Whats-App-Image-2025-12-08-at-8-36-07-PM-3.jpg",
    "https://i.ibb.co/rRPk2zMs/Whats-App-Image-2025-12-08-at-8-36-07-PM.jpg",
    "https://i.ibb.co/KjDjQ7hF/Whats-App-Image-2025-12-08-at-8-36-08-PM-1.jpg",
    "https://i.ibb.co/fVswdgnV/Whats-App-Image-2025-12-08-at-8-36-08-PM-2.jpg",
    "https://i.ibb.co/Jwqj5t3L/Whats-App-Image-2025-12-08-at-8-36-08-PM-3.jpg",
    "https://i.ibb.co/SDNNjgnH/Whats-App-Image-2025-12-08-at-8-36-08-PM.jpg",
    "https://i.ibb.co/f6JHXHt/Whats-App-Image-2025-12-08-at-8-36-09-PM-1.jpg",
    "https://i.ibb.co/1Y5BWPmq/Whats-App-Image-2025-12-08-at-8-36-09-PM.jpg"
  ],
  "features": [
    "Original Paint",
    "Hyper Roof",
    "Leather Seats",
    "Optional 4WD",
    "Automatic Transmission",
    "2000cc Petrol Engine",
    "Mileage: 159,000 km",
    "Ready Documents",
    "Cash/Trade-in/Bank Finance Options",
    "Price Negotiable"
  ]
},
{
  "id": "MPK0008A",
  "name": "Nissan Note e-POWER 2021",
  "make": "Nissan",
  "model": "Note e-POWER",
  "year": 2021,
  "price": "1,680,000",
  "transmission": "Automatic",
  "fuel": "Hybrid Petrol (e-POWER)",
  "engine_capacity": "1200cc",
  "drive": "2WD",
  "mileage": "Low Mileage",
  "status": "Available",
  "images": [
    "https://i.ibb.co/ksS3CkSd/Whats-App-Image-2025-12-09-at-08-44-06-4fcbdb49.jpg",
    "https://i.ibb.co/kVXDvg05/Whats-App-Image-2025-12-09-at-08-44-06-8fd10eef.jpg",
    "https://i.ibb.co/xq6swtvW/Whats-App-Image-2025-12-09-at-08-44-07-0ef2002d.jpg",
    "https://i.ibb.co/LXTTN2xr/Whats-App-Image-2025-12-09-at-08-44-09-b4ce2493.jpg",
    "https://i.ibb.co/yFgmxDp9/Whats-App-Image-2025-12-09-at-08-44-09-f6096a29.jpg",
    "https://i.ibb.co/xq5CCF5s/Whats-App-Image-2025-12-09-at-08-44-09-fde95e3a.jpg",
    "https://i.ibb.co/ZzTZ0jRF/Whats-App-Image-2025-12-09-at-08-44-10-757c7d52.jpg",
    "https://i.ibb.co/DHhWffSr/Whats-App-Image-2025-12-09-at-08-44-10-b307a0aa.jpg",
    "https://i.ibb.co/BHXks6jD/Whats-App-Image-2025-12-09-at-08-44-11-2a83ed80.jpg",
    "https://i.ibb.co/4wFS3dkt/Whats-App-Image-2025-12-09-at-08-44-11-80a09862.jpg",
    "https://i.ibb.co/8DZhzsDG/Whats-App-Image-2025-12-09-at-08-44-11-e10efe48.jpg",
    "https://i.ibb.co/cKT4bQkZ/Whats-App-Image-2025-12-09-at-08-44-12-6da1d5a3.jpg",
    "https://i.ibb.co/nsHdwbNJ/Whats-App-Image-2025-12-09-at-08-44-12-c76c0c6a.jpg"
  ],
  "features": [
    "1200cc Petrol-Hybrid e-POWER Engine",
    "Excellent Fuel Efficiency (up to 35 km/L)",
    "Reverse Camera",
    "Steering Controls",
    "Automatic Transmission",
    "EV Mode",
    "Lane Assist",
    "Dash Cam",
    "Low Mileage",
    "HDMI & USB-C Ports",
    "Spacious Interior",
    "Parking Sensors",
    "Foglights",
    "Daytime Running Lights",
    "Blue Exterior",
    "Anti-Collision Control",
    "Emergency Brake Package",
    "Electric Hand Brake"
  ]
},
{
  "id": "MPK0009A",
  "name": "Nissan NV200 2018",
  "make": "Nissan",
  "model": "NV200",
  "year": 2018,
  "price": "1,650,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "engine_capacity": "1600cc",
  "drive": "2WD",
  "mileage": "â€”",
  "status": "Available",
  "images": [
    "https://i.ibb.co/tw38Rvz1/Whats-App-Image-2025-12-09-at-08-46-57-c3bb3a04.jpg",
    "https://i.ibb.co/YBf9WzPX/Whats-App-Image-2025-12-09-at-08-46-58-a6776816.jpg",
    "https://i.ibb.co/FqbXDWgQ/Whats-App-Image-2025-12-09-at-08-46-59-cebf9209.jpg",
    "https://i.ibb.co/jkcHJFnR/Whats-App-Image-2025-12-09-at-08-47-00-1c5b3b1a.jpg",
    "https://i.ibb.co/fYX6jXzy/Whats-App-Image-2025-12-09-at-08-47-00-b218a04c.jpg",
    "https://i.ibb.co/gFWR01Sd/Whats-App-Image-2025-12-09-at-08-47-01-11f61164.jpg",
    "https://i.ibb.co/dJKw2FyX/Whats-App-Image-2025-12-09-at-08-47-01-fcf6b8e5.jpg",
    "https://i.ibb.co/nsNFL8XX/Whats-App-Image-2025-12-09-at-08-47-02-15529f36.jpg",
    "https://i.ibb.co/kVPty7KG/Whats-App-Image-2025-12-09-at-08-47-02-d6928277.jpg"
  ],
  "features": [
    "1600cc Petrol Engine",
    "Automatic Transmission",
    "2WD",
    "Spacious Cargo Area",
    "Sliding Side Doors",
    "Comfortable Interior",
    "Ideal for Business or Family Use"
  ]
},
{
  "id": "MPK00XXD5",
  "name": "Mitsubishi Delica D:5 2018",
  "make": "Mitsubishi",
  "model": "Delica D5",
  "year": 2018,
  "price": "2,350,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "mileage": "â€”",
  "engine": "2400cc",
  "drive": "4WD Optional",
  "seats": "8 Seater",
  "status": "Available",
  "images": [
     "https://i.ibb.co/XrKmYgms/Whats-App-Image-2025-12-09-at-16-45-44-15c8dcf1.jpg",
    "https://i.ibb.co/q3ZW4G3r/Whats-App-Image-2025-12-09-at-16-45-43-88ad187e.jpg",
    "https://i.ibb.co/wDMTMdH/Whats-App-Image-2025-12-09-at-16-45-43-a29521d2.jpg",
    "https://i.ibb.co/XrKmYgms/Whats-App-Image-2025-12-09-at-16-45-44-15c8dcf1.jpg",
    "https://i.ibb.co/219h12Tr/Whats-App-Image-2025-12-09-at-16-45-44-e2a0ecae.jpg",
    "https://i.ibb.co/9kVVK7wB/Whats-App-Image-2025-12-09-at-16-45-44-f3ae2ef2.jpg",
    "https://i.ibb.co/35Dm0mKg/Whats-App-Image-2025-12-09-at-16-45-45-af2cd649.jpg",
    "https://i.ibb.co/VWWsPKMS/Whats-App-Image-2025-12-09-at-16-45-45-e5bcccf9.jpg",
    "https://i.ibb.co/PZTfckNJ/Whats-App-Image-2025-12-09-at-16-45-46-8b738702.jpg",
    "https://i.ibb.co/p5ZwhNN/Whats-App-Image-2025-12-09-at-16-45-46-54202022.jpg",
    "https://i.ibb.co/Kc9KL53K/Whats-App-Image-2025-12-09-at-16-45-46-f16456b6.jpg"
  ],
  "features": [
    "Pearl exterior",
    "Alloy rims",
    "Dual sliding doors (one automatic)",
    "Arm rests",
    "Traction control",
    "Foldable side mirrors",
    "High ground clearance"
  ],
  "whatsapp": "0723098206"
},



{
  "id": "MPK0006A",
  "name": "Nissan X-Trail NT31 2012",
  "make": "Nissan",
  "model": "X-Trail NT31",
  "year": 2012,
  "price": "1,350,000",
  "transmission": "Automatic",
  "fuel": "Petrol",
  "mileage": "159,000 km",
  "status": "Available",
  "images": [
    "https://i.ibb.co/SDQ3Tbyr/Whats-App-Image-2025-12-08-at-8-44-22-PM-1.jpg",
    "https://i.ibb.co/0df09LL/Whats-App-Image-2025-12-08-at-8-44-22-PM-2.jpg",
    "https://i.ibb.co/Xxwwd9kK/Whats-App-Image-2025-12-08-at-8-44-22-PM.jpg",
    "https://i.ibb.co/WpkZzXw4/Whats-App-Image-2025-12-08-at-8-44-23-PM-1.jpg",
    "https://i.ibb.co/7tN10JND/Whats-App-Image-2025-12-08-at-8-44-23-PM.jpg"
  ],
  "features": [
    "Original Paint",
    "Hyper Roof",
    "Leather Seats",
    "Optional 4WD",
    "Automatic Transmission",
    "2000cc Petrol Engine",
    "Mileage: 159,000 km",
    "Ready Documents",
    "Cash/Trade-in/Bank Finance Options",
    "Price Negotiable"
  ]
},
{
  "id": "MPK0007A",
  "name": "Toyota Probox Hybrid 2018",
  "make": "Toyota",
  "model": "Probox Hybrid",
  "year": 2018,
  "price": "1,380,000",
  "transmission": "Automatic",
  "fuel": "Hybrid Petrol",
  "engine_capacity": "1500cc",
  "drive": "2WD",
  "mileage": "â€”",
  "status": "Available",
  "images": [
    "https://i.ibb.co/VY34x1jk/Whats-App-Image-2025-12-09-at-08-39-11-145d7825.jpg",
    "https://i.ibb.co/GbnDVZw/Whats-App-Image-2025-12-09-at-08-39-12-9b2e7bbe.jpg",
    "https://i.ibb.co/BbhMnzn/Whats-App-Image-2025-12-09-at-08-39-12-579b737c.jpg",
    "https://i.ibb.co/m5jkswKd/Whats-App-Image-2025-12-09-at-08-39-13-23331f68.jpg",
    "https://i.ibb.co/WNfMKz5P/Whats-App-Image-2025-12-09-at-08-40-19-adb54e5d.jpg"
  ],
  "features": [
    "1500cc Hybrid Petrol Engine",
    "2018 Model",
    "2WD",
    "Fabric Interiors",
    "Reverse Camera",
    "Automatic Transmission"
  ]
},







           
            // Add more cars as needed
        ];

        // Replace the agents data with the specific numbers provided
const agents = [
    { 
        name: "Samuel", 
        role: "Sales Agent", 
        number: "+254724804354", 
        photo: "ðŸ‘¨ðŸ¾â€ðŸ’¼",
        whatsapp: "https://wa.me/254724804354" 
    },
    { 
        name: "Samson", 
        role: "Sales Agent", 
        number: "+254723098206", 
        photo: "ðŸ‘¨ðŸ¾â€ðŸ’¼",
        whatsapp: "https://wa.me/254723098206" 
    }
];

// Update the openAgentsModal function to use the specific reserve message
function openAgentsModal(car) {
    if (!car) return;
    
    currentCarForReservation = car;
    agentsList.innerHTML = '';
    
    // Constant reserve message that goes directly to DM
    const reserveMessage = `Hello, I would like to RESERVE the ${car.name} (ID: ${car.id}). Please confirm availability and reservation process.`;
    const encodedMessage = encodeURIComponent(reserveMessage);
    
    // Create agent items for both Samuel and Samson
    agents.forEach(agent => {
        const whatsappUrl = `${agent.whatsapp}?text=${encodedMessage}`;
        
        const agentItem = document.createElement('div');
        agentItem.className = 'agent-item';
        agentItem.innerHTML = `
            <div class="agent-photo">${agent.photo}</div>
            <div class="agent-name">${agent.name}</div>
            <div class="agent-role">${agent.role}</div>
            <div class="agent-number">${agent.number}</div>
            <a class="agent-action" href="${whatsappUrl}" target="_blank">Chat with ${agent.name}</a>
        `;
        agentsList.appendChild(agentItem);
    });
    
    agentsModal.classList.add('active');
}

// Update the car data to use the specific agents for each car
// This ensures the reserve functionality works with the updated agents system
cars.forEach(car => {
    car.agents = [0, 1]; // Reference to Samuel (0) and Samson (1) in the agents array
});
        // DOM Elements
        const carsGrid = document.getElementById('carsGrid');
        const carModal = document.getElementById('carModal');
        const agentsModal = document.getElementById('agentsModal');
        const closeModal = document.getElementById('closeModal');
        const closeAgents = document.getElementById('closeAgents');
        const prevPage = document.getElementById('prevPage');
        const nextPage = document.getElementById('nextPage');
        const currentPageEl = document.getElementById('currentPage');
        const totalPagesEl = document.getElementById('totalPages');
        const prevCar = document.getElementById('prevCar');
        const nextCar = document.getElementById('nextCar');
        const modalReserveBtn = document.getElementById('modalReserveBtn');
        const modalCarTitle = document.getElementById('modalCarTitle');
        const modalPrimaryImage = document.getElementById('modalPrimaryImage');
        const modalThumbnails = document.getElementById('modalThumbnails');
        const carDetails = document.getElementById('carDetails');
        const agentsList = document.getElementById('agentsList');
        const pageTitle = document.getElementById('pageTitle');
        const searchResultsHeader = document.getElementById('searchResultsHeader');
        const searchResultsTitle = document.getElementById('searchResultsTitle');
        const searchCriteria = document.getElementById('searchCriteria');
        const clearSearch = document.getElementById('clearSearch');
        const exitReserve = document.getElementById('exitReserve');

        // State
        let currentPage = 1;
        const carsPerPage = 15;
        let currentCarIndex = 0;
        let filteredCars = [...cars]; // Start with all cars
        let currentCarForReservation = null;

        // Initialize the page
        function init() {
            // Check for URL parameters and filter cars
            checkURLParameters();
            displayCars();
            setupPagination();
            setupEventListeners();
            setupScrollAnimation();
        }

        // Check URL parameters for search criteria
        function checkURLParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const make = urlParams.get('make');
            const model = urlParams.get('model');
            const year = urlParams.get('year');
            const transmission = urlParams.get('transmission');
            const fuel = urlParams.get('fuel');
            const search = urlParams.get('search');
            
            // If there's a search parameter, filter the cars
            if (search === 'true' && (make || model || year || transmission || fuel)) {
                filterCars(make, model, year, transmission, fuel);
                showSearchResultsHeader(make, model, year, transmission, fuel);
            }
        }

        // Filter cars based on search criteria
        function filterCars(make, model, year, transmission, fuel) {
            filteredCars = cars.filter(car => {
                // Check each criteria - if provided, it must match
                if (make && car.make !== make) return false;
                if (model && car.model !== model) return false;
                if (year && car.year.toString() !== year) return false;
                if (transmission && car.transmission !== transmission) return false;
                if (fuel && car.fuel !== fuel) return false;
                return true;
            });
            
            // Reset to first page when filtering
            currentPage = 1;
        }

        // Show search results header with criteria
        function showSearchResultsHeader(make, model, year, transmission, fuel) {
            searchResultsHeader.style.display = 'block';
            pageTitle.textContent = 'Search Results';
            
            // Clear previous criteria
            searchCriteria.innerHTML = '';
            
            // Add criteria items
            if (make) {
                addCriteriaItem('Make', make);
            }
            if (model) {
                addCriteriaItem('Model', model);
            }
            if (year) {
                addCriteriaItem('Year', year);
            }
            if (transmission) {
                addCriteriaItem('Transmission', transmission);
            }
            if (fuel) {
                addCriteriaItem('Fuel Type', fuel);
            }
            
            // Update results title
            const count = filteredCars.length;
            searchResultsTitle.textContent = `Found ${count} ${count === 1 ? 'vehicle' : 'vehicles'} matching your search`;
        }

        // Add a criteria item to the search criteria display
        function addCriteriaItem(label, value) {
            const criteriaItem = document.createElement('div');
            criteriaItem.className = 'search-criteria-item';
            criteriaItem.innerHTML = `
                <span>${label}:</span>
                <strong>${value}</strong>
            `;
            searchCriteria.appendChild(criteriaItem);
        }

        // Display cars in the grid
        function displayCars() {
            const startIndex = (currentPage - 1) * carsPerPage;
            const endIndex = startIndex + carsPerPage;
            const currentCars = filteredCars.slice(startIndex, endIndex);
            
            carsGrid.innerHTML = '';
            
            if (currentCars.length === 0) {
                carsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
                        <div style="font-size: 60px; margin-bottom: 20px; color: var(--light-text);">ðŸš—</div>
                        <h3 style="font-size: 24px; margin-bottom: 15px; color: var(--text-color);">No Vehicles Found</h3>
                        <p style="color: var(--light-text); margin-bottom: 25px; max-width: 500px; margin-left: auto; margin-right: auto;">
                            No vehicles match your search criteria. Try adjusting your filters or <a href="#" id="clearSearchLink" style="color: var(--primary-color); text-decoration: underline;">view all vehicles</a>.
                        </p>
                    </div>
                `;
                
                // Add event listener to clear search link
                document.getElementById('clearSearchLink').addEventListener('click', (e) => {
                    e.preventDefault();
                    clearSearchAndShowAll();
                });
                
                return;
            }
            
            currentCars.forEach((car, index) => {
                const statusClass = car.status ? `status-${car.status.toLowerCase().replace(' ', '-')}` : '';
                const primaryImage = car.images?.[0] || 'https://images.unsplash.com/photo-1552519507-da3b142c6e3d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                
                const carCard = document.createElement('div');
                carCard.className = 'car-card';
                carCard.setAttribute('data-car-id', car.id);
                carCard.style.animationDelay = `${index * 0.1}s`;
                carCard.innerHTML = `
                    <div class="car-image-container">
                        ${car.status ? `<div class="status-badge ${statusClass}">${car.status}</div>` : ''}
                        <img src="${primaryImage}" alt="${car.name}" class="car-image">
                        <button class="reserve-btn" data-car-id="${car.id}">Reserve</button>
                    </div>
                    <div class="car-info">
                        
                        <div class="car-name">${car.name}</div>
                        <div class="car-id">ID: ${car.id}</div>
                        <div class="car-year-price">
                            <span>${car.year || 'N/A'}</span>
                            <span class="car-price">${car.price || 'Contact for price'}</span>
                        </div>
                        <div class="car-specs">
                            <span>${car.transmission || 'N/A'}</span>
                            <span>${car.fuel || 'N/A'}</span>
                            <span>${car.mileage || 'N/A'}</span>
                        </div>
                    </div>
                `;
                carsGrid.appendChild(carCard);
            });
            
            attachCarEventListeners();
        }

        // Clear search and show all vehicles
        function clearSearchAndShowAll() {
            filteredCars = [...cars];
            currentPage = 1;
            searchResultsHeader.style.display = 'none';
            pageTitle.textContent = 'Our Vehicle Collection';
            displayCars();
            setupPagination();
            
            // Update URL without search parameters
            const newUrl = window.location.pathname;
            window.history.replaceState({}, document.title, newUrl);
        }

        // Attach event listeners to car cards
        function attachCarEventListeners() {
            document.querySelectorAll('.car-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.classList.contains('reserve-btn')) {
                        e.stopPropagation();
                        const carId = card.getAttribute('data-car-id');
                        const car = filteredCars.find(c => c.id === carId);
                        openAgentsModal(car);
                    } else {
                        const carId = card.getAttribute('data-car-id');
                        openCarModal(carId);
                    }
                });
            });
        }

        // Setup scroll animation for status badges
        function setupScrollAnimation() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const statusBadge = entry.target.querySelector('.status-badge');
                        if (statusBadge) {
                            setTimeout(() => {
                                statusBadge.classList.add('visible');
                            }, 200);
                        }
                    }
                });
            }, { threshold: 0.3 });
            
            document.querySelectorAll('.car-card').forEach(card => {
                observer.observe(card);
            });
        }

        // Setup pagination
        function setupPagination() {
            const totalPages = Math.ceil(filteredCars.length / carsPerPage);
            currentPageEl.textContent = currentPage;
            totalPagesEl.textContent = totalPages || 1;
            prevPage.disabled = currentPage === 1;
            nextPage.disabled = currentPage === totalPages || totalPages === 0;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Pagination
            prevPage.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayCars();
                    setupPagination();
                    setupScrollAnimation();
                }
            });
            
            nextPage.addEventListener('click', () => {
                const totalPages = Math.ceil(filteredCars.length / carsPerPage);
                if (currentPage < totalPages) {
                    currentPage++;
                    displayCars();
                    setupPagination();
                    setupScrollAnimation();
                }
            });
            
            // Modal events
            closeModal.addEventListener('click', closeCarModal);
            closeAgents.addEventListener('click', closeAgentsModal);
            
            // Car navigation in modal
            prevCar.addEventListener('click', showPreviousCar);
            nextCar.addEventListener('click', showNextCar);
            
            // Reserve button in modal
            modalReserveBtn.addEventListener('click', () => {
                const car = filteredCars[currentCarIndex];
                openAgentsModal(car);
            });
            
            // Close modals on overlay click
            carModal.addEventListener('click', (e) => {
                if (e.target === carModal) closeCarModal();
            });
            
            agentsModal.addEventListener('click', (e) => {
                if (e.target === agentsModal) closeAgentsModal();
            });
            
            // Clear search button
            clearSearch.addEventListener('click', clearSearchAndShowAll);
            
            // Exit reserve button
            exitReserve.addEventListener('click', closeAgentsModal);
        }

        // Open car modal with enhanced animations
        function openCarModal(carId) {
            const car = filteredCars.find(c => c.id === carId);
            if (!car) return;
            
            currentCarIndex = filteredCars.findIndex(c => c.id === carId);
            modalCarTitle.textContent = car.name;
            
            const primaryImage = car.images?.[0] || 'https://images.unsplash.com/photo-1552519507-da3b142c6e3d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
            modalPrimaryImage.src = primaryImage;
            modalPrimaryImage.alt = car.name;
            
            // Clear and add thumbnails
            modalThumbnails.innerHTML = '';
            if (car.images && car.images.length > 0) {
                car.images.slice(0, 7).forEach((image, index) => {
                    const img = document.createElement('img');
                    img.src = image;
                    img.alt = `${car.name} - Image ${index + 1}`;
                    img.className = 'thumbnail' + (index === 0 ? ' active' : '');
                    img.addEventListener('click', () => {
                        modalPrimaryImage.src = image;
                        // Update active thumbnail
                        document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
                        img.classList.add('active');
                    });
                    modalThumbnails.appendChild(img);
                });
            } else {
                // Add placeholder thumbnails if no images
                for (let i = 0; i < 7; i++) {
                    const img = document.createElement('img');
                    img.src = 'https://images.unsplash.com/photo-1552519507-da3b142c6e3d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
                    img.alt = `${car.name} - Image ${i + 1}`;
                    img.className = 'thumbnail' + (i === 0 ? ' active' : '');
                    img.addEventListener('click', () => {
                        modalPrimaryImage.src = img.src;
                        document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
                        img.classList.add('active');
                    });
                    modalThumbnails.appendChild(img);
                }
            }
            
            // Populate car details with staggered animation
            carDetails.innerHTML = '';
            const details = [
               
                { label: 'Price', value: car.price },
                { label: 'Year', value: car.year },
                { label: 'Make', value: car.make },
                { label: 'Model', value: car.model },
                { label: 'Transmission', value: car.transmission },
                { label: 'Fuel Type', value: car.fuel },
                { label: 'Mileage', value: car.mileage },
                { label: 'Status', value: car.status },
                { label: 'Features', value: car.features, isFeatures: true }
            ];
            
            details.forEach((detail, index) => {
                if (!detail.value || detail.value === 'N/A' || (Array.isArray(detail.value) && detail.value.length === 0)) return;
                
                const detailItem = document.createElement('div');
                detailItem.className = 'detail-item';
                detailItem.style.animationDelay = `${index * 0.1}s`;
                
                if (detail.isFeatures && Array.isArray(detail.value)) {
                    const featuresList = document.createElement('div');
                    featuresList.className = 'features-list';
                    detail.value.forEach(feature => {
                        const featureItem = document.createElement('div');
                        featureItem.className = 'feature-item';
                        featureItem.textContent = feature;
                        featuresList.appendChild(featureItem);
                    });
                    detailItem.innerHTML = `<div class="detail-label">${detail.label}</div>`;
                    detailItem.appendChild(featuresList);
                } else {
                    detailItem.innerHTML = `
                        <div class="detail-label">${detail.label}</div>
                        <div>${detail.value}</div>
                    `;
                }
                carDetails.appendChild(detailItem);
            });
            
            carModal.classList.add('active');
        }

        // Close car modal
        function closeCarModal() {
            carModal.classList.remove('active');
        }

        // Show previous car in modal
        function showPreviousCar() {
            if (filteredCars.length === 0) return;
            currentCarIndex = currentCarIndex > 0 ? currentCarIndex - 1 : filteredCars.length - 1;
            openCarModal(filteredCars[currentCarIndex].id);
        }

        // Show next car in modal
        function showNextCar() {
            if (filteredCars.length === 0) return;
            currentCarIndex = currentCarIndex < filteredCars.length - 1 ? currentCarIndex + 1 : 0;
            openCarModal(filteredCars[currentCarIndex].id);
        }

        // Open agents modal with specific agents for the car
        function openAgentsModal(car) {
            if (!car) return;
            
            currentCarForReservation = car;
            agentsList.innerHTML = '';
            
            // Get the specific agents for this car
            const carAgents = car.agents.map(index => agents[index]);
            
            carAgents.forEach(agent => {
                const formattedNumber = agent.number.replace(/\s+/g, '').replace(/-/g, '');
                const message = `Hello, I am interested in reserving the ${car.name} (ID: ${car.id}). Please provide more details.`;
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${formattedNumber}?text=${encodedMessage}`;
                
                const agentItem = document.createElement('div');
                agentItem.className = 'agent-item';
                agentItem.innerHTML = `
                    <div class="agent-photo">${agent.photo}</div>
                    <div class="agent-name">${agent.name}</div>
                    <div class="agent-role">${agent.role}</div>
                    <a class="agent-action" href="${whatsappUrl}" target="_blank">Chat on WhatsApp</a>
                `;
                agentsList.appendChild(agentItem);
            });
            
            agentsModal.classList.add('active');
        }

        // Close agents modal
        function closeAgentsModal() {
            agentsModal.classList.remove('active');
            currentCarForReservation = null;
        }

        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>